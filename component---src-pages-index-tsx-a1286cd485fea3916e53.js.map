{"version":3,"file":"component---src-pages-index-tsx-a1286cd485fea3916e53.js","mappings":"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","sources":["webpack://z-game/./node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteralLoose.js","webpack://z-game/./src/game/lib/Splite.ts","webpack://z-game/./src/game/lib/Anime.ts","webpack://z-game/./src/game/lib/GameMap.ts","webpack://z-game/./src/game/Kernel.ts","webpack://z-game/./src/game/MapCell.ts","webpack://z-game/./src/game/index.ts","webpack://z-game/./src/images/frame.svg","webpack://z-game/./src/images/frame_inner.svg","webpack://z-game/./src/images/splite.png","webpack://z-game/./src/pages/index.tsx"],"sourcesContent":["export default function _taggedTemplateLiteralLoose(strings, raw) {\n  if (!raw) {\n    raw = strings.slice(0);\n  }\n\n  strings.raw = raw;\n  return strings;\n}","import { Vec2 } from './Vec'\n\nexport interface Drawer {\n  draw(\n    ctx: CanvasRenderingContext2D,\n    s: Vec2,\n    scale: number,\n    mode1: number,\n    mode2: number,\n  ): void\n  sz(): Vec2\n}\n\nexport type SpliteProp = {\n  topLeft: Vec2\n  sz: Vec2\n}\n\nexport class Splite implements Drawer {\n  readonly splite: HTMLImageElement\n  readonly prop: SpliteProp\n\n  constructor(splite: HTMLImageElement, prop: SpliteProp) {\n    this.splite = splite\n    this.prop = prop\n  }\n\n  draw(\n    ctx: CanvasRenderingContext2D,\n    p: Vec2,\n    scale: number,\n    mode1: number,\n    mode2: number,\n  ) {\n    ctx.drawImage(\n      this.splite,\n      this.prop.topLeft[0] + mode1 * this.prop.sz[0],\n      this.prop.topLeft[1] + mode2 * this.prop.sz[1],\n      this.prop.sz[0],\n      this.prop.sz[1],\n      p[0] * scale,\n      p[1] * scale,\n      this.prop.sz[0] * scale,\n      this.prop.sz[1] * scale,\n    )\n  }\n\n  sz() {\n    return this.prop.sz\n  }\n}\n","import { Vec2 } from './Vec'\nimport { Splite, SpliteProp, Drawer } from './Splite'\n\nexport type AnimeProp = SpliteProp & {\n  frames: number[]\n  patterns?: number\n}\n\nexport class Anime extends Splite implements Drawer {\n  readonly prop: AnimeProp\n  readonly patterns: number\n  cnt = 0\n\n  constructor(splite: HTMLImageElement, prop: AnimeProp) {\n    super(splite, prop)\n    this.prop = prop\n    if (prop.patterns) {\n      this.patterns = prop.patterns\n    } else {\n      this.patterns = prop.frames.reduce((acc, v) => (acc > v ? acc : v), 0)\n    }\n  }\n\n  draw(\n    ctx: CanvasRenderingContext2D,\n    p: Vec2,\n    scale: number,\n    mode1: number,\n    mode2: number,\n  ) {\n    super.draw(\n      ctx,\n      p,\n      scale,\n      this.prop.frames[this.cnt] + this.patterns * mode2,\n      mode1,\n    )\n  }\n\n  tick(): number {\n    this.cnt = (this.cnt + 1) % this.prop.frames.length\n    return this.prop.frames[this.cnt]\n  }\n}\n","import { Drawer } from './Splite'\nimport { Vec2 } from './Vec'\n\nexport type Appearance = {\n  mode1: number\n  mode2: number\n}\n\nexport interface Cell {\n  appearance(): Appearance\n}\n\nexport class GameMap<T extends Cell> {\n  readonly sz: Vec2\n  readonly data: Array<T>\n  readonly s: Vec2\n  readonly e: Vec2\n  readonly screenSize: Vec2\n\n  constructor(\n    sz: Vec2,\n    loader: (x: number, y: number) => T,\n    s: Vec2,\n    e: Vec2,\n    screenSize: Vec2,\n  ) {\n    this.sz = sz\n    this.s = s\n    this.e = e\n    this.screenSize = screenSize\n    this.data = new Array<T>(sz[0] * sz[1])\n    for (let j = 0; j < sz[1]; j++) {\n      for (let i = 0; i < sz[0]; i++) {\n        this.data[j * sz[0] + i] = loader(i, j)\n      }\n    }\n  }\n\n  at(p: Vec2): T {\n    const p2 = posMod([Math.floor(p[0]), Math.floor(p[1])], this.sz)\n    return this.data[p2[1] * this.sz[0] + p2[0]]\n  }\n\n  draw(ctx: CanvasRenderingContext2D, d: Drawer, o: Vec2, scale: number) {\n    const [cw, ch] = d.sz()\n\n    const left = o[0] - this.s[0] * cw\n    const si2 = left >= 0 ? this.s[0] : this.s[0] - Math.floor(left) / cw\n    const ox2 = left >= 0 ? o[0] : o[0] + (Math.floor(left) % cw)\n    const right = o[0] + this.e[0] * cw\n    const ei2 =\n      right < this.screenSize[0]\n        ? this.e[0]\n        : this.e[0] - Math.floor(right - this.screenSize[0]) / cw\n\n    const top = o[1] - this.s[1] * ch\n    const sj2 = top >= 0 ? this.s[1] : this.s[1] - Math.floor(top) / ch\n    const oy2 = top >= 0 ? o[1] : o[1] + (Math.floor(top) % ch)\n    const bottom = o[1] + this.e[1] * ch\n    const ej2 =\n      bottom < this.screenSize[1]\n        ? this.e[1]\n        : this.e[1] - Math.floor(bottom - this.screenSize[1]) / ch\n\n    for (let j = sj2; j < ej2; j++) {\n      for (let i = si2; i < ei2; i++) {\n        const c = this.at([i, j])\n        const a = c.appearance()\n        d.draw(ctx, [ox2 + i * cw, oy2 + j * ch], scale, a.mode1, a.mode2)\n      }\n    }\n  }\n}\n\nconst posMod = (a: Vec2, b: Vec2): Vec2 => {\n  const m = [a[0] % b[0], a[1] % b[1]]\n  return [m[0] < 0 ? m[0] + b[0] : m[0], m[1] < 0 ? m[1] + b[1] : m[1]]\n}\n","import { Anime } from './lib/Anime'\nimport { Splite } from './lib/Splite'\nimport { Vec2 } from './lib/Vec'\nimport { GameMap } from './lib/GameMap'\n\nimport { MapCell } from './MapCell'\n\nconst heatCount = 8\nconst popResume = 96\n\ntype KernelCommand = {\n  left: boolean\n  right: boolean\n  space: boolean\n}\n\ntype InitialKernelState = {\n  pos?: Vec2\n  vel?: Vec2\n  onGround?: boolean\n  orientation?: number\n}\n\nclass KernelState {\n  pos: Vec2\n  vel: Vec2\n  onGround: boolean\n  orientation: number\n\n  jumpPow: Vec2\n  heat: number\n  popped: number\n  trans: number\n\n  constructor(s: InitialKernelState) {\n    this.pos = s.pos || [0, 0]\n    this.vel = s.vel || [0, 0]\n    this.onGround = s.onGround || true\n    this.orientation = s.orientation || 0\n    this.jumpPow = [0, 0]\n    this.heat = 0\n    this.popped = 0\n    this.trans = 0\n  }\n\n  clone(): KernelState {\n    return {\n      ...this,\n      pos: [this.pos[0], this.pos[1]],\n      vel: [this.vel[0], this.vel[1]],\n      jumpPow: [this.jumpPow[0], this.jumpPow[1]],\n    }\n  }\n}\n\nexport class Kernel {\n  private readonly anime: {\n    idle: Anime\n    squat: Anime\n    jump: Anime\n  }\n  private readonly shadow: Splite\n  private readonly trans: Splite\n  private readonly explosion: Splite\n  private readonly ellasticCoeff: number\n  private currentAnime: Anime\n  private state0: KernelState\n\n  state: KernelState\n  explosionPos: Vec2\n  explosionNum: number\n\n  constructor(splite: HTMLImageElement, state0: InitialKernelState) {\n    this.ellasticCoeff = 0.5\n\n    this.anime = {\n      idle: new Anime(splite, {\n        topLeft: [0, 0],\n        sz: [12, 12],\n        frames: [0, 0, 0, 2, 0, 1, 0],\n        patterns: 4,\n      }),\n      squat: new Anime(splite, {\n        topLeft: [0, 0],\n        sz: [12, 12],\n        frames: [3],\n        patterns: 4,\n      }),\n      jump: new Anime(splite, {\n        topLeft: [0, 0],\n        sz: [12, 12],\n        frames: [2, 2, 0, 2, 2, 2, 0],\n        patterns: 4,\n      }),\n    }\n    this.currentAnime = this.anime.idle\n    this.shadow = new Splite(splite, {\n      topLeft: [0, 24],\n      sz: [12, 12],\n    })\n    this.trans = new Splite(splite, {\n      topLeft: [0, 36],\n      sz: [12, 12],\n    })\n    this.explosion = new Splite(splite, {\n      topLeft: [0, 48],\n      sz: [36, 12],\n    })\n\n    this.state0 = new KernelState(state0)\n    this.state = this.state0.clone()\n\n    this.explosionPos = this.state.pos\n    this.explosionNum = 0\n  }\n\n  reset() {\n    this.state = this.state0.clone()\n  }\n\n  tick(cmd: KernelCommand, gameMap: GameMap<MapCell>) {\n    if (cmd.left && this.state.onGround) {\n      this.state.jumpPow[0]--\n      if (this.state.jumpPow[0] < -4) {\n        this.state.jumpPow[0] = -4\n      }\n      this.state.orientation = 0\n    }\n    if (cmd.right && this.state.onGround) {\n      this.state.jumpPow[0]++\n      if (this.state.jumpPow[0] > 4) {\n        this.state.jumpPow[0] = 4\n      }\n      this.state.orientation = 1\n    }\n    if (\n      !cmd.left &&\n      !cmd.right &&\n      !cmd.space &&\n      this.state.onGround &&\n      this.state.jumpPow[0] !== 0 &&\n      this.state.jumpPow[1] === 0\n    ) {\n      this.state.onGround = false\n      this.state.vel = [this.state.jumpPow[0], -4]\n      this.state.jumpPow = [0, 0]\n    }\n\n    const vBottom = this.state.vel[1] > 0 ? this.state.vel[1] : 0\n    const mpBottom: Vec2 = [\n      Math.round((this.state.pos[0] - 2) / 16),\n      Math.floor((this.state.pos[1] + vBottom + 1) / 16),\n    ]\n\n    this.state.pos[0] += this.state.vel[0]\n    this.state.pos[1] += this.state.vel[1]\n\n    const vUp = this.state.vel[1] < 0 ? this.state.vel[1] : 0\n    const mpUp: Vec2 = [\n      Math.round((this.state.pos[0] + this.state.vel[0] - 2) / 16),\n      Math.floor((this.state.pos[1] + vUp - 4) / 16),\n    ]\n    const mpSide: Vec2 = [\n      Math.round((this.state.pos[0] + this.state.vel[0] - 2) / 16),\n      Math.floor((this.state.pos[1] - 1) / 16),\n    ]\n\n    this.currentAnime = this.anime.idle\n    if (cmd.space && this.state.onGround) {\n      this.currentAnime = this.anime.squat\n      this.state.jumpPow[1] -= 2\n      if (this.state.jumpPow[1] < -11) {\n        this.state.jumpPow[1] = -11\n      }\n    } else {\n      if (!cmd.space && this.state.jumpPow[1] < 0) {\n        this.state.onGround = false\n        if (this.state.popped == 0) {\n          this.state.vel = this.state.jumpPow\n        } else {\n          this.state.vel = [\n            this.state.jumpPow[0] * 1.25,\n            this.state.jumpPow[1] * 0.5,\n          ]\n        }\n        this.state.jumpPow = [0, 0]\n      } else if (!this.state.onGround) {\n        if (this.state.popped == 0) {\n          this.state.vel[1] += 2\n        } else {\n          this.state.vel[1] += 1.5\n        }\n        if (this.state.vel[1] > 14) {\n          this.state.vel[1] = 14\n        }\n      }\n      if (!this.state.onGround) {\n        if (gameMap.at(mpUp).occupied() && this.state.vel[1] < 0) {\n          this.state.vel[1] *= -this.ellasticCoeff\n          this.state.vel[0] *= this.ellasticCoeff\n          this.state.pos[1] = mpUp[1] * 16 + 16 + 4\n        }\n        if (gameMap.at(mpSide).occupied()) {\n          this.state.vel[0] *= -this.ellasticCoeff\n        }\n        if (gameMap.at(mpBottom).step() && this.state.vel[1] >= 0) {\n          this.state.pos[1] = mpBottom[1] * 16\n          this.state.vel = [0, 0]\n          this.state.onGround = true\n          this.currentAnime = this.anime.squat\n        }\n        if (this.state.vel[1] < 0) {\n          this.currentAnime = this.anime.jump\n        } else if (this.state.vel[1] > 0) {\n          this.currentAnime = this.anime.squat\n        }\n      }\n    }\n\n    if (this.explosionNum && this.explosionNum > 0) {\n      this.explosionNum--\n      if (this.explosionNum == 2) {\n        this.state.heat = 5 * heatCount\n        this.state.popped = popResume\n\n        this.state.onGround = false\n        this.state.vel = [0, -15]\n        this.state.jumpPow = [0, 0]\n      }\n    } else if (gameMap.at(mpBottom).heat()) {\n      this.state.heat++\n      if (this.state.heat > 5 * heatCount - 2 && this.state.popped == 0) {\n        this.explosionPos = [this.state.pos[0], this.state.pos[1]]\n        this.explosionNum = 3\n      }\n    } else {\n      this.state.heat--\n      if (this.state.heat < 0) {\n        this.state.heat = 0\n      }\n      if (this.state.popped > 0) {\n        this.state.popped--\n        this.state.heat = 0\n        if (this.state.popped < 0) {\n          this.state.popped = 0\n        }\n      }\n    }\n    if (this.state.trans < 8) {\n      this.state.trans++\n    }\n  }\n\n  draw(ctx: CanvasRenderingContext2D, offset: Vec2, scale: number) {\n    const kernelMode = this.currentAnime.tick()\n    const mode =\n      (this.state.popped > 0 && this.state.popped != 2) ||\n      this.state.heat == heatCount * 5 - 1\n        ? 5\n        : Math.min(4, Math.floor(this.state.heat / heatCount))\n    if (this.state.onGround) {\n      this.shadow.draw(\n        ctx,\n        [offset[0] + this.state.pos[0], offset[1] + this.state.pos[1] - 5],\n        scale,\n        mode * 4 + kernelMode,\n        0,\n      )\n    }\n    if (this.state.trans > 2) {\n      this.currentAnime.draw(\n        ctx,\n        [offset[0] + this.state.pos[0], offset[1] + this.state.pos[1] - 6],\n        scale,\n        this.state.orientation,\n        mode,\n      )\n    }\n    if (this.state.trans < 8) {\n      this.trans.draw(\n        ctx,\n        [offset[0] + this.state.pos[0], offset[1] + this.state.pos[1] - 5],\n        scale,\n        this.state.trans - 2,\n        0,\n      )\n    }\n    if (this.explosionNum > 0) {\n      this.explosion.draw(\n        ctx,\n        [\n          offset[0] + this.explosionPos[0] - 12,\n          offset[1] + this.explosionPos[1] - 8,\n        ],\n        scale,\n        3 - this.explosionNum,\n        0,\n      )\n    }\n  }\n}\n","import { Cell, Appearance } from './lib/GameMap'\n\nexport class MapCell implements Cell {\n  readonly v: Appearance\n  readonly typ: number\n\n  constructor(mode1: number, mode2: number, typ: number) {\n    this.v = { mode1, mode2 }\n    this.typ = typ\n  }\n\n  appearance(): Appearance {\n    return this.v\n  }\n\n  occupied(): boolean {\n    return this.typ == 1\n  }\n\n  step(): boolean {\n    return this.typ > 0\n  }\n\n  heat(): boolean {\n    return this.typ == 2\n  }\n}\n\nexport class OverlayMapCell implements Cell {\n  readonly v: Appearance\n\n  constructor(mode1: number, mode2: number) {\n    this.v = { mode1, mode2 }\n  }\n\n  appearance(): Appearance {\n    return this.v\n  }\n}\n","import { Splite } from './lib/Splite'\nimport { Anime } from './lib/Anime'\nimport { GameMap } from './lib/GameMap'\nimport { Vec2 } from './lib/Vec'\n\nimport { Kernel } from './Kernel'\nimport { MapCell, OverlayMapCell } from './MapCell'\n\nimport mapData from './data/map.yaml'\n\nclass Game {\n  readonly canvas: HTMLCanvasElement\n  readonly ctx: CanvasRenderingContext2D\n  readonly splite: HTMLImageElement\n  readonly messageBox: HTMLDivElement\n  cleanup?: () => void\n\n  readonly scale: number\n\n  readonly gameMap: GameMap<MapCell>\n  readonly overlayMap: GameMap<OverlayMapCell>\n  readonly overlayAnimeMap: GameMap<OverlayMapCell>\n  readonly bg: Splite\n  readonly bgOverlay: Splite\n  readonly bgOverlayAnime: Anime\n  readonly kernel: Kernel\n\n  command: Map<string, boolean>\n\n  origin: Vec2\n\n  constructor(\n    canvas: HTMLCanvasElement,\n    splite: HTMLImageElement,\n    messageBox: HTMLDivElement,\n  ) {\n    const ctx = canvas.getContext('2d')\n    if (!ctx) {\n      throw 'failed to get canvas context'\n    }\n    this.ctx = ctx\n    this.canvas = canvas\n    this.ctx.imageSmoothingEnabled = false\n    this.splite = splite\n    this.messageBox = messageBox\n\n    this.scale = 3\n    this.origin = [mapData.start.pos[0] * 16, mapData.start.pos[1] * 16]\n    this.kernel = new Kernel(this.splite, {\n      pos: this.origin,\n    })\n    this.bg = new Splite(this.splite, {\n      topLeft: [0, 512],\n      sz: [16, 16],\n    })\n    this.bgOverlay = new Splite(this.splite, {\n      topLeft: [0, 896],\n      sz: [16, 16],\n    })\n    this.bgOverlayAnime = new Anime(this.splite, {\n      topLeft: [0, 768],\n      sz: [16, 16],\n      frames: [0, 0, 1, 1, 2, 2, 1, 1],\n    })\n\n    this.gameMap = new GameMap<MapCell>(\n      [14, 12],\n      (x: number, y: number) =>\n        new MapCell(\n          mapData.main[y][x][1],\n          mapData.main[y][x][0],\n          mapData.type[y][x],\n        ),\n      [-100, 0],\n      [100, 12],\n      [640, 480],\n    )\n    this.overlayMap = new GameMap<OverlayMapCell>(\n      [14, 11],\n      (x: number, y: number) =>\n        new OverlayMapCell(mapData.overlay[y][x][1], mapData.overlay[y][x][0]),\n      [-100, 0],\n      [100, 12],\n      [640, 480],\n    )\n    this.overlayAnimeMap = new GameMap<OverlayMapCell>(\n      [14, 11],\n      (x: number, y: number) =>\n        new OverlayMapCell(\n          mapData.overlayAnime[y][x][1],\n          mapData.overlayAnime[y][x][0],\n        ),\n      [-100, 0],\n      [100, 12],\n      [640, 480],\n    )\n    this.command = new Map<string, boolean>()\n  }\n\n  start() {\n    const tickTimer = setInterval(this.tick.bind(this), 80)\n\n    let showMessage = false\n    const messageTest = () => {\n      if (showMessage) {\n        this.showMessage(\"What's poppin?\")\n      } else {\n        this.hideMessage()\n      }\n      showMessage = !showMessage\n    }\n    const messageTimer = setInterval(messageTest, 5000)\n\n    this.cleanup = () => {\n      clearInterval(tickTimer)\n      clearInterval(messageTimer)\n    }\n  }\n\n  stop() {\n    if (this.cleanup) {\n      this.cleanup()\n    }\n  }\n\n  tick() {\n    this.ctx.fillStyle = 'black'\n    this.ctx.fillRect(0, 0, 640, 480)\n\n    try {\n      const kernelCmd = {\n        left: this.command.has('ArrowLeft'),\n        right: this.command.has('ArrowRight'),\n        space: this.command.has('Space'),\n      }\n      this.kernel.tick(kernelCmd, this.gameMap)\n      this.bgOverlayAnime.tick()\n\n      const state = this.kernel.state\n      if (state.pos[1] > 16 * 14) {\n        this.kernel.reset()\n      }\n\n      const offset: Vec2 = [0, (this.origin[1] - state.pos[1]) / 3]\n\n      this.gameMap.draw(this.ctx, this.bg, offset, this.scale)\n      this.kernel.draw(this.ctx, offset, this.scale)\n      this.overlayMap.draw(this.ctx, this.bgOverlay, offset, this.scale)\n      this.overlayAnimeMap.draw(\n        this.ctx,\n        this.bgOverlayAnime,\n        offset,\n        this.scale,\n      )\n    } catch (err) {\n      console.error(err)\n      this.stop()\n    }\n  }\n\n  keydown(e: Pick<KeyboardEvent, 'code'>) {\n    this.command.set(e.code, true)\n  }\n  keyup(e: Pick<KeyboardEvent, 'code'>) {\n    this.command.delete(e.code)\n  }\n\n  private showMessage(text: string) {\n    this.messageBox.innerText = text\n    this.messageBox.style.display = 'block'\n    this.messageBox.classList.remove('hide')\n  }\n  private hideMessage() {\n    this.messageBox.classList.add('hide')\n  }\n}\n\nexport default Game\n","export default __webpack_public_path__ + \"static/frame-837fb4fd69fb62d88c255448223b7810.svg\";","export default __webpack_public_path__ + \"static/frame_inner-60f1e379dcb3ddb7d26173360cdc65ba.svg\";","export default __webpack_public_path__ + \"static/splite-429cdb9b5bb9736ca2e02be53045834f.png\";","import React, { useEffect, useRef } from 'react'\nimport { css, keyframes } from '@emotion/react'\n\nimport Game from '@doramanjyu/z-game/game'\n\nimport frame from '@doramanjyu/z-game/images/frame.svg'\nimport frameInner from '@doramanjyu/z-game/images/frame_inner.svg'\nimport splite from '@doramanjyu/z-game/images/splite.png'\n\nconst IndexPage = () => {\n  const canvasRef = useRef<HTMLCanvasElement>(null)\n  const spliteRef = useRef<HTMLImageElement>(null)\n  const messageRef = useRef<HTMLDivElement>(null)\n\n  useEffect(() => {\n    if (!canvasRef.current || !spliteRef.current || !messageRef.current) {\n      return\n    }\n    const g = new Game(canvasRef.current, spliteRef.current, messageRef.current)\n    g.start()\n    const keydown = g.keydown.bind(g)\n    const keyup = g.keyup.bind(g)\n    document.addEventListener('keydown', keydown)\n    document.addEventListener('keyup', keyup)\n\n    const noPreventDefault = (e: TouchEvent): boolean => {\n      if (!e.target || !(e.target instanceof Element)) {\n        return false\n      }\n      return e.target.closest('a') !== null\n    }\n    let [tx, ty] = [0, 0]\n    let touching = false\n    const touchMoveThreshold = 32\n    const touchStart = (e: TouchEvent) => {\n      if (noPreventDefault(e)) {\n        return\n      }\n      e.preventDefault()\n      e.stopPropagation()\n      if (!touching) {\n        tx = e.touches[0].screenX\n        ty = e.touches[0].screenY\n        touching = true\n      }\n    }\n    const touchMove = (e: TouchEvent) => {\n      if (noPreventDefault(e)) {\n        return\n      }\n      e.preventDefault()\n      e.stopPropagation()\n      if (e.touches[0].screenY > ty + touchMoveThreshold) {\n        keydown({ code: 'Space' })\n      }\n      if (e.touches[0].screenX > tx + touchMoveThreshold) {\n        keydown({ code: 'ArrowLeft' })\n        keyup({ code: 'ArrowRight' })\n      } else if (e.touches[0].screenX < tx - touchMoveThreshold) {\n        keydown({ code: 'ArrowRight' })\n        keyup({ code: 'ArrowLeft' })\n      } else {\n        keyup({ code: 'ArrowRight' })\n        keyup({ code: 'ArrowLeft' })\n      }\n    }\n    const touchEnd = (e: TouchEvent) => {\n      if (noPreventDefault(e)) {\n        return\n      }\n      e.preventDefault()\n      e.stopPropagation()\n      if (e.touches.length === 0) {\n        keyup({ code: 'Space' })\n        keyup({ code: 'ArrowRight' })\n        keyup({ code: 'ArrowLeft' })\n        touching = false\n      }\n    }\n\n    document.addEventListener('touchstart', touchStart)\n    document.addEventListener('touchmove', touchMove)\n    document.addEventListener('touchend', touchEnd)\n    document.addEventListener('touchcancel', touchEnd)\n\n    return () => {\n      document.removeEventListener('touchstart', touchStart)\n      document.removeEventListener('touchmove', touchMove)\n      document.removeEventListener('touchend', touchEnd)\n      document.removeEventListener('touchcancel', touchEnd)\n      document.removeEventListener('keydown', keydown)\n      document.removeEventListener('keyup', keyup)\n      g.stop()\n    }\n  }, [canvasRef, spliteRef, messageRef])\n\n  return (\n    <main>\n      <title>What's poppin?</title>\n      <div\n        style={{\n          width: '808px',\n          height: '689px',\n          backgroundImage: `url(${frame})`,\n          position: 'relative',\n        }}\n      >\n        <canvas\n          ref={canvasRef}\n          style={{\n            backgroundColor: '#000',\n            width: '640px',\n            height: '480px',\n            borderRadius: '30px',\n            position: 'absolute',\n            left: '84px',\n            top: '188px',\n          }}\n          css={css`\n            &:focus-visible {\n              outline-style: none !important;\n            }\n          `}\n          width=\"640\"\n          height=\"480\"\n        />\n        <div\n          style={{\n            width: '640px',\n            height: '480px',\n            backgroundImage: `url(${frameInner})`,\n            position: 'absolute',\n            left: '84px',\n            top: '188px',\n          }}\n        />\n        <div\n          ref={messageRef}\n          style={{\n            boxSizing: 'border-box',\n            backgroundColor: 'rgba(255, 255, 255, 0.8)',\n            borderWidth: '2px',\n            borderStyle: 'dotted',\n            borderRadius: '0 20px 20px 20px',\n            borderColor: 'white',\n            position: 'absolute',\n            width: '540px',\n            height: '85px',\n            left: '134px',\n            bottom: '34px',\n            padding: '10px 20px',\n            fontSize: '20px',\n            lineHeight: '25px',\n            color: '#600',\n            display: 'none',\n            animationIterationCount: 1,\n            animationFillMode: 'forwards',\n          }}\n          css={css`\n            animation: ${bounceIn} 0.8s ease;\n            &.hide {\n              animation: ${bounceOut} 0.5s ease;\n            }\n          `}\n        ></div>\n      </div>\n      <img\n        ref={spliteRef}\n        src={splite}\n        style={{\n          display: 'none',\n        }}\n      />\n      <div\n        style={{\n          paddingTop: '10px',\n          textAlign: 'right',\n          color: '#666',\n        }}\n        css={css`\n          > a {\n            color: #666;\n          }\n          > a:hover {\n            color: #999;\n          }\n        `}\n      >\n        <a\n          href=\"https://github.com/Doramanjyu/z-game\"\n          target=\"_blank\"\n          rel=\"noreferrer\"\n        >\n          Source repository\n        </a>\n      </div>\n    </main>\n  )\n}\n\nconst bounceIn = keyframes`\n  from, 20%, 46%, 80%, to {\n    transform: translate3d(0,0,0);\n    visibility: visible;\n  }\n  40%, 42% {\n    transform: translate3d(0, -20px, 0);\n  }\n  70% {\n    transform: translate3d(0, -8px, 0);\n  }\n  90% {\n    transform: translate3d(0,-2px,0);\n  }\n`\n\nconst bounceOut = keyframes`\n  from, 50% {\n    transform: translate3d(0,0,0);\n  }\n  20% {\n    transform: translate3d(0,-2px,0);\n  }\n  70% {\n    transform: translate3d(0,-5px,0);\n  }\n  to {\n    visibility: hidden;\n  }\n`\n\nexport default IndexPage\n"],"names":["_taggedTemplateLiteralLoose","strings","raw","slice","Splite","splite","prop","this","draw","ctx","p","scale","mode1","mode2","drawImage","topLeft","sz","Anime","cnt","patterns","frames","reduce","acc","v","tick","length","GameMap","loader","s","e","screenSize","data","Array","j","i","at","p2","posMod","Math","floor","d","o","cw","ch","left","si2","ox2","right","ei2","top","sj2","oy2","bottom","ej2","a","appearance","b","m","KernelState","pos","vel","onGround","orientation","jumpPow","heat","popped","trans","clone","Kernel","state0","ellasticCoeff","anime","idle","squat","jump","currentAnime","shadow","explosion","state","explosionPos","explosionNum","reset","cmd","gameMap","space","vBottom","mpBottom","round","vUp","mpUp","mpSide","occupied","step","offset","kernelMode","mode","heatCount","min","MapCell","typ","OverlayMapCell","Game","canvas","messageBox","getContext","imageSmoothingEnabled","origin","mapData","kernel","bg","bgOverlay","bgOverlayAnime","x","y","overlayMap","overlayAnimeMap","command","Map","start","tickTimer","setInterval","bind","showMessage","messageTimer","hideMessage","cleanup","clearInterval","stop","fillStyle","fillRect","kernelCmd","has","err","console","error","keydown","set","code","keyup","delete","text","innerText","style","display","classList","remove","add","bounceIn","keyframes","bounceOut","canvasRef","useRef","spliteRef","messageRef","useEffect","current","g","document","addEventListener","noPreventDefault","target","Element","closest","tx","ty","touching","touchStart","preventDefault","stopPropagation","touches","screenX","screenY","touchMove","touchEnd","removeEventListener","width","height","backgroundImage","frame","position","ref","backgroundColor","borderRadius","css","frameInner","boxSizing","borderWidth","borderStyle","borderColor","padding","fontSize","lineHeight","color","animationIterationCount","animationFillMode","src","paddingTop","textAlign","href","rel"],"sourceRoot":""}